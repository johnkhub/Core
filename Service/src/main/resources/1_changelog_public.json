{ "databaseChangeLog": [
  {
    "changeSet": {
      "id": "0000000000-0",
      "author": "frankvr",
      "objectQuotingStrategy": "QUOTE_ALL_OBJECTS",
      "changes": [
        {
          "sqlFile": {
            "dbms" : "postgresql",
            "encoding" : "utf8",
            "path": "public/00_init.sql",
            "relativeToChangelogFile": false,
            "endDelimiter" : "//"
          }
        }]
    }
  },

  {
    "changeSet": {
      "id": "1605621892882-1",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "kv_base_pkey"
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              }]
            ,
            "tableName": "kv_base"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-2",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              }]
            ,
            "tableName": "tags"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-3",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "assettype_pkey"
                  },
                  "name": "code",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "name",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "name": "description",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "uid",
                  "remarks": "This field is required to model the assettype as an entity in the context of the access control code (e.g. \"access_control\".\"entity_access\" table)",
                  "type": "UUID"
                }
              }]
            ,
            "tableName": "assettype"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-4",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "asset_classification_pkey"
                  },
                  "name": "asset_id",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "name": "responsible_dept_code",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueBoolean": true,
                  "name": "is_owned",
                  "type": "BOOLEAN"
                }
              }]
            ,
            "tableName": "asset_classification"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-5",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "asset_identification_pkey"
                  },
                  "name": "asset_id",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "name": "barcode",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "name": "serial_number",
                  "type": "VARCHAR"
                }
              }]
            ,
            "tableName": "asset_identification"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-6",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "location_pkey"
                  },
                  "name": "asset_id",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "name": "address",
                  "type": "TEXT"
                }
              },
              {
                "column": {
                  "name": "latitude",
                  "type": "numeric(11, 8)"
                }
              },
              {
                "column": {
                  "name": "longitude",
                  "type": "numeric(11, 8)"
                }
              },
              {
                "column": {
                  "name": "municipality_code",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "town_code",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "suburb_code",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "district_code",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "region_code",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "ward_code",
                  "type": "VARCHAR(10)"
                }
              }]
            ,
            "tableName": "location"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-7",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "asset_grouping_pkey"
                  },
                  "name": "asset_id",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "asset_grouping_pkey"
                  },
                  "name": "grouping_id",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "grouping_id_type",
                  "type": "UUID"
                }
              }]
            ,
            "tableName": "asset_grouping"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-8",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "grouping_id_type_pkey"
                  },
                  "name": "type_id",
                  "remarks": "E.g. EMIS",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "name",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "description",
                  "type": "VARCHAR"
                }
              }]
            ,
            "tableName": "grouping_id_type"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-9",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "quantity_pkey"
                  },
                  "name": "asset_id",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "unit_code",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "num_units",
                  "type": "numeric"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "quantity_pkey"
                  },
                  "name": "name",
                  "type": "TEXT"
                }
              }]
            ,
            "tableName": "quantity"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-10",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "asset_link_pkey"
                  },
                  "name": "asset_id",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "asset_link_pkey"
                  },
                  "name": "external_id",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "external_id_type",
                  "type": "UUID"
                }
              }]
            ,
            "tableName": "asset_link"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-11",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "external_id_type_pkey"
                  },
                  "name": "type_id",
                  "remarks": "E.g. Asset ID in SAP",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "name",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "description",
                  "type": "VARCHAR"
                }
              }]
            ,
            "tableName": "external_id_type"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-12",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "PK_ASSET_TAGS"
                  },
                  "name": "asset_id",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "tags",
                  "type": "TEXT[]"
                }
              }]
            ,
            "tableName": "asset_tags"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-13",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "autoIncrement": true,
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "finyear_pkey"
                  },
                  "name": "id",
                  "type": "INTEGER"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "name",
                  "type": "VARCHAR(40)"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "start_date",
                  "remarks": "The month and day of the the start of the financial year",
                  "type": "date"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "end_date",
                  "remarks": "The month and day of the end of the financial year",
                  "type": "date"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueNumeric": 13,
                  "name": "num_periods",
                  "remarks": "The number of periods in this financial year",
                  "type": "INTEGER"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueNumeric": 1,
                  "name": "current_period",
                  "remarks": "The current period",
                  "type": "INTEGER"
                }
              }]
            ,
            "tableName": "finyear"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-14",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "autoIncrement": true,
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "postal_code_pkey"
                  },
                  "name": "id",
                  "type": "INTEGER"
                }
              },
              {
                "column": {
                  "name": "suburb",
                  "type": "TEXT"
                }
              },
              {
                "column": {
                  "name": "box_code",
                  "type": "TEXT"
                }
              },
              {
                "column": {
                  "name": "street_code",
                  "type": "TEXT"
                }
              },
              {
                "column": {
                  "name": "area",
                  "type": "TEXT"
                }
              }]
            ,
            "remarks": "This table is purely a convenience so you can check that a postal code exsists when you capture data.",
            "tableName": "postal_code"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-15",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "kv_type_pkey"
                  },
                  "name": "code",
                  "type": "VARCHAR(30)"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "name",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "name": "description",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "name": "owner",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "name": "table",
                  "remarks": "FQN name of the table that contains the values",
                  "type": "VARCHAR"
                }
              }]
            ,
            "tableName": "kv_type"
          }
        }]
      
    }
  },

  {
    "changeSet": {
      "id": "1605621892882-20",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
            ,
            "indexName": "tags_k_idx",
            "tableName": "tags",
            "unique": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-21",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "responsible_dept_code"
                }
              }]
            ,
            "indexName": "asset_classif_dept",
            "tableName": "asset_classification"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-22",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "defaultValueBoolean": true,
                  "name": "is_owned"
                }
              }]
            ,
            "indexName": "asset_classif_owned",
            "tableName": "asset_classification"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-23",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "asset_id"
                }
              },
              {
                "column": {
                  "name": "barcode"
                }
              }]
            ,
            "indexName": "asset_identification_asset_id_barcode_idx",
            "tableName": "asset_identification"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-24",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "asset_id"
                }
              },
              {
                "column": {
                  "name": "serial_number"
                }
              }]
            ,
            "indexName": "asset_identification_asset_id_serial_number_idx",
            "tableName": "asset_identification"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-25",
      "author": "frank (generated)",
      "changes": [
        {
          "sqlFile": {
            "comment" : "Diacritics",
            "dbms" : "postgresql",
            "encoding" : "utf8",
            "path": "public/accentless_search.sql",
            "relativeToChangelogFile": false,
            "endDelimiter" : ";"
          }

        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "computed": true,
                  "name": "lower(f_unaccent(address))"
                }
              }]
            ,
            "indexName": "location_unaccent_address_idx",
            "tableName": "location"
          }
        }]
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-26",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "grouping_id_type"
                }
              },
              {
                "column": {
                  "name": "asset_id"
                }
              },
              {
                "column": {
                  "name": "grouping_id"
                }
              }]
            ,
            "indexName": "asset_grouping_grouping_id_type_asset_id_grouping_id_idx",
            "tableName": "asset_grouping"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-27",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "grouping_id_type"
                }
              },
              {
                "column": {
                  "name": "grouping_id"
                }
              }]
            ,
            "indexName": "asset_grouping_grouping_id_type_grouping_id_idx",
            "tableName": "asset_grouping"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-28",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "external_id_type"
                }
              },
              {
                "column": {
                  "name": "asset_id"
                }
              },
              {
                "column": {
                  "name": "external_id"
                }
              }]
            ,
            "indexName": "asset_link_external_id_type_asset_id_external_id_idx",
            "tableName": "asset_link"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-29",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "external_id_type"
                }
              },
              {
                "column": {
                  "name": "external_id"
                }
              },
              {
                "column": {
                  "name": "external_id_type"
                }
              }]
            ,
            "indexName": "asset_link_external_id_type_external_id_external_id_type1_idx",
            "tableName": "asset_link"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-30",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "external_id_type"
                }
              },
              {
                "column": {
                  "name": "external_id"
                }
              }]
            ,
            "indexName": "asset_link_external_id_type_external_id_idx",
            "tableName": "asset_link",
            "unique": true
          }
        }]
      
    }
  },
  {
    "changeSet": {
      "id": "1605621892882-33",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "suburb"
                }
              },
              {
                "column": {
                  "name": "box_code"
                }
              }]
            ,
            "indexName": "postal_code_suburb_box_code_idx",
            "tableName": "postal_code"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-34",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "suburb"
                }
              },
              {
                "column": {
                  "name": "street_code"
                }
              }]
            ,
            "indexName": "postal_code_suburb_street_code_idx",
            "tableName": "postal_code"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-35",
      "author": "frank (generated)",
      "changes": [
        {
          "addUniqueConstraint": {
            "columnNames": "owner",
            "constraintName": "kv_type_owner_key",
            "tableName": "kv_type"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-36",
      "author": "frank (generated)",
      "changes": [
        {
          "addUniqueConstraint": {
            "columnNames": "table",
            "constraintName": "kv_type_table_key",
            "tableName": "kv_type"
          }
        }]
      
    }
  },

  {
    "changeSet": {
      "id": "1605621892882-38",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "unit_pkey"
                  },
                  "name": "code",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "name",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "is_si",
                  "remarks": "Is SI or Imperial?",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "symbol",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "name": "type",
                  "type": "UNIT_TYPE"
                }
              }]
            ,
            "tableName": "unit"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-39",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "grouping_id_type",
            "baseTableName": "asset_grouping",
            "constraintName": "asset_grouping_grouping_id_type_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "type_id",
            "referencedTableName": "grouping_id_type",
            "validate": true
          }
        }]
      
    }
  },
  {
    "changeSet": {
      "id": "1605621892882-41",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "external_id_type",
            "baseTableName": "asset_link",
            "constraintName": "asset_link_external_id_type_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "type_id",
            "referencedTableName": "external_id_type",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-42",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "unit_code",
            "baseTableName": "quantity",
            "constraintName": "unit_code_fk",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "code",
            "referencedTableName": "unit",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-43",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "asset_pkey"
                  },
                  "name": "asset_id",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "asset_type_code",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "code",
                  "type": "VARCHAR(100)"
                }
              },
              {
                "column": {
                  "name": "description",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "name",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "name": "adm_path",
                  "remarks": "Asset may or may not have one. Links to Template Service",
                  "type": "LTREE"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "func_loc_path",
                  "type": "LTREE"
                }
              },
              {
                "column": {
                  "name": "grap_path",
                  "type": "LTREE"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "remarks": "WE DO NOT DELETE",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueNumeric": 0,
                  "name": "reference_count",
                  "remarks": "We should be allowed to delete terminal nodes that have no transactions against them?",
                  "type": "BIGINT"
                }
              }]
            ,
            "tableName": "asset"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-44",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false,
                    "primaryKey": true,
                    "primaryKeyName": "geoms_pkey"
                  },
                  "name": "asset_id",
                  "type": "UUID"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "geom",
                  "type": "GEOMETRY"
                }
              }]
            ,
            "tableName": "geoms"
          }
        }]
      
    }
  },
  {
    "changeSet": {
      "id": "1605621892882-46",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "geom",
                  "type": "GEOMETRY"
                }
              }]
            ,
            "tableName": "ref_district"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-47",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "geom",
                  "type": "GEOMETRY"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "district_k",
                  "type": "VARCHAR(10)"
                }
              }]
            ,
            "tableName": "ref_municipality"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-48",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "geom",
                  "type": "GEOMETRY"
                }
              }]
            ,
            "tableName": "ref_region"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-49",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "geom",
                  "type": "GEOMETRY"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "ward_k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "town_k",
                  "type": "VARCHAR(10)"
                }
              }]
            ,
            "tableName": "ref_suburb"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-50",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "geom",
                  "type": "GEOMETRY"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "local_municipality_k",
                  "type": "VARCHAR(10)"
                }
              }]
            ,
            "tableName": "ref_town"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-51",
      "author": "frank (generated)",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "local_municipality_k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "geom",
                  "type": "GEOMETRY"
                }
              }]
            ,
            "tableName": "ref_ward"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-52",
      "author": "frank (generated)",
      "changes": [
        {
          "addUniqueConstraint": {
            "columnNames": "code",
            "constraintName": "asset_code_key",
            "tableName": "asset"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-53",
      "author": "frank (generated)",
      "changes": [
        {
          "sql": {
            "comment" : "Add gist index for ltree",
            "endDelimeter" : ";",
            "sql" : "CREATE INDEX IF NOT EXISTS asset_adm_path_idx ON public.asset USING gist (adm_path);"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-54",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "asset_type_code"
                }
              }]
            ,
            "indexName": "asset_asset_type_code_idx",
            "tableName": "asset"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-55",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "deactivated_at"
                }
              }]
            ,
            "indexName": "asset_deactivated_at_idx",
            "tableName": "asset"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-56",
      "author": "frank (generated)",
      "changes": [
        {
          "sql": {
            "comment" : "Add gist index for ltree",
            "endDelimeter" : ";",
            "sql" : "CREATE INDEX IF NOT EXISTS asset_grap_path_idx ON public.asset USING gist (grap_path);"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-57",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "computed": true,
                  "name": "lower(f_unaccent((name)::text))"
                }
              }]
            ,
            "indexName": "asset_lower_idx",
            "tableName": "asset"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-58",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "name"
                }
              }]
            ,
            "indexName": "asset_name_idx",
            "tableName": "asset"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-59",
      "author": "frank (manual)",
      "changes": [
        {
          "sql": {
             "comment" : "Add gist index for ltree",
              "endDelimeter" : ";",
              "sql" : "CREATE INDEX IF NOT EXISTS asset_func_loc_path_idx ON public.asset USING gist (func_loc_path);"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-60",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
            ,
            "indexName": "ref_district_k_idx",
            "tableName": "ref_district",
            "unique": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-61",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "v"
                }
              }]
            ,
            "indexName": "ref_district_v_idx",
            "tableName": "ref_district"
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-62",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
            ,
            "indexName": "ref_municipality_k_idx",
            "tableName": "ref_municipality",
            "unique": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-63",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
            ,
            "indexName": "ref_region_k_idx",
            "tableName": "ref_region",
            "unique": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-64",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "v"
                }
              }]
            ,
            "indexName": "ref_region_v_idx",
            "tableName": "ref_region",
            "unique": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-65",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
            ,
            "indexName": "ref_suburb_k_idx",
            "tableName": "ref_suburb",
            "unique": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-66",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
            ,
            "indexName": "ref_town_k_idx",
            "tableName": "ref_town",
            "unique": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-67",
      "author": "frank (generated)",
      "changes": [
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
            ,
            "indexName": "ref_ward_k_idx",
            "tableName": "ref_ward",
            "unique": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-68",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "asset_type_code",
            "baseTableName": "asset",
            "constraintName": "asset_asset_type_code_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "code",
            "referencedTableName": "assettype",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-69",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "asset_id",
            "baseTableName": "asset_grouping",
            "constraintName": "asset_grouping_asset_id_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "asset_id",
            "referencedTableName": "asset",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-70",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "asset_id",
            "baseTableName": "quantity",
            "constraintName": "asset_id_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "asset_id",
            "referencedTableName": "asset",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-71",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "asset_id",
            "baseTableName": "asset_identification",
            "constraintName": "asset_identification_asset_id_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "asset_id",
            "referencedTableName": "asset",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-72",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "asset_id",
            "baseTableName": "asset_link",
            "constraintName": "asset_link_asset_id_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "asset_id",
            "referencedTableName": "asset",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-73",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "asset_id",
            "baseTableName": "asset_tags",
            "constraintName": "asset_tags_asset_id_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "asset_id",
            "referencedTableName": "asset",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-74",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "district_k",
            "baseTableName": "ref_municipality",
            "constraintName": "fk_district",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "k",
            "referencedTableName": "ref_district",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-75",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "local_municipality_k",
            "baseTableName": "ref_town",
            "constraintName": "fk_local",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "k",
            "referencedTableName": "ref_municipality",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-76",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "town_k",
            "baseTableName": "ref_suburb",
            "constraintName": "fk_town",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "k",
            "referencedTableName": "ref_town",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-77",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "ward_k",
            "baseTableName": "ref_suburb",
            "constraintName": "fk_ward",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "k",
            "referencedTableName": "ref_ward",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-78",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "asset_id",
            "baseTableName": "geoms",
            "constraintName": "geoms_asset_id_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "asset_id",
            "referencedTableName": "asset",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-79",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "asset_id",
            "baseTableName": "location",
            "constraintName": "location_asset_id_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "asset_id",
            "referencedTableName": "asset",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-80",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "district_code",
            "baseTableName": "location",
            "constraintName": "location_district_code_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "k",
            "referencedTableName": "ref_district",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-81",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "municipality_code",
            "baseTableName": "location",
            "constraintName": "location_municipality_code_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "k",
            "referencedTableName": "ref_municipality",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-82",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "region_code",
            "baseTableName": "location",
            "constraintName": "location_region_code_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "k",
            "referencedTableName": "ref_region",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-83",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "suburb_code",
            "baseTableName": "location",
            "constraintName": "location_suburb_code_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "k",
            "referencedTableName": "ref_suburb",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-84",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "town_code",
            "baseTableName": "location",
            "constraintName": "location_town_code_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "k",
            "referencedTableName": "ref_town",
            "validate": true
          }
        }]
      
    }
  },
  
  {
    "changeSet": {
      "id": "1605621892882-85",
      "author": "frank (generated)",
      "changes": [
        {
          "addForeignKeyConstraint": {
            "baseColumnNames": "ward_code",
            "baseTableName": "location",
            "constraintName": "location_ward_code_fkey",
            "deferrable": false,
            "initiallyDeferred": false,
            "onDelete": "NO ACTION",
            "onUpdate": "NO ACTION",
            "referencedColumnNames": "k",
            "referencedTableName": "ref_ward",
            "validate": true
          }
        }]
      
    }
  },

  {
    "changeSet": {
      "id": "0000000000-2",
      "author": "frankvr",
      "comment" : "Modtrack",
      "objectQuotingStrategy": "QUOTE_ALL_OBJECTS",
      "changes": [
        {
          "sqlFile": {
            "dbms" : "postgresql",
            "encoding" : "utf8",
            "path": "public/mod_track.sql",
            "relativeToChangelogFile": false,
            "endDelimiter" : ";"
          }
        }]
    }
  },




  {
    "changeSet": {
      "id": "5f01bf22-d381-4685-8f1f-670f57825ff8",
      "author": "frank",
      "comment": "New lookups added",
      "changes": [
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              }]
          ,
            "tableName": "ref_asset_class",
            "schemaName": "public"
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
          ,
            "indexName": "ref_asset_class_k_idx",
            "tableName": "ref_asset_class",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "v"
                }
              }]
          ,
            "indexName": "ref_asset_class_v_idx",
            "tableName": "ref_asset_class",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              }]
          ,
            "tableName": "ref_asset_nature",
            "schemaName": "public"
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
          ,
            "indexName": "ref_asset_nature_k_idx",
            "tableName": "ref_asset_nature",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "v"
                }
              }]
          ,
            "indexName": "ref_asset_nature_v_idx",
            "tableName": "ref_asset_nature",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              }]
          ,
            "tableName": "ref_criticality_rating",
            "schemaName": "public"
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
          ,
            "indexName": "ref_criticality_rating_k_idx",
            "tableName": "ref_criticality_rating",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "v"
                }
              }]
          ,
            "indexName": "ref_criticality_rating_v_idx",
            "tableName": "ref_criticality_rating",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              }]
          ,
            "tableName": "ref_utilisation_rating",
            "schemaName": "public"
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
          ,
            "indexName": "ref_utilisation_rating_k_idx",
            "tableName": "ref_utilisation_rating",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "v"
                }
              }]
          ,
            "indexName": "ref_utilisation_rating_v_idx",
            "tableName": "ref_utilisation_rating",
            "schemaName" : "public",
            "unique": true
          }
        },
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              }
            ],
            "tableName": "ref_accessibility_rating",
            "schemaName": "public"
          }
        },
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }
            ],
            "indexName": "ref_accessibility_rating_k_idx",
            "tableName": "ref_accessibility_rating",
            "schemaName": "public",
            "unique": true
          }
        },
        {
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "v"
                }
              }
            ],
            "indexName": "ref_accessibility_rating_v_idx",
            "tableName": "ref_accessibility_rating",
            "schemaName": "public",
            "unique": true
          }
        },
        {
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              }, {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "accuracy",
                  "type": "float"
                }
              }]
          ,
            "tableName": "ref_confidence_rating",
            "schemaName": "public"
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
          ,
            "indexName": "ref_confidence_rating_k_idx",
            "tableName": "ref_confidence_rating",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "v"
                }
              }]
          ,
            "indexName": "ref_confidence_rating_v_idx",
            "tableName": "ref_confidence_rating",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              }, {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "asset_info",
                  "type": "text"
                }
              }, {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "risk",
                  "type": "text"
                }
              }]
          ,
            "tableName": "ref_condition_rating",
            "schemaName": "public"
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
          ,
            "indexName": "ref_condition_rating_k_idx",
            "tableName": "ref_condition_rating",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "v"
                }
              }]
          ,
            "indexName": "ref_condition_rating_v_idx",
            "tableName": "ref_condition_rating",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createTable": {
            "columns": [
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "k",
                  "type": "VARCHAR(10)"
                }
              },
              {
                "column": {
                  "name": "v",
                  "type": "VARCHAR"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "creation_date",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "name": "deactivated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              },
              {
                "column": {
                  "defaultValueBoolean": false,
                  "name": "allow_delete",
                  "type": "BOOLEAN"
                }
              },
              {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "defaultValueComputed": "now()",
                  "name": "activated_at",
                  "type": "TIMESTAMP WITHOUT TIME ZONE"
                }
              }, {
                "column": {
                  "constraints": {
                    "nullable": false
                  },
                  "name": "asset_info",
                  "type": "text"
                }
              }]
          ,
            "tableName": "ref_performance_rating",
            "schemaName": "public"
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "k"
                }
              }]
          ,
            "indexName": "ref_performance_rating_k_idx",
            "tableName": "ref_performance_rating",
            "schemaName" : "public",
            "unique": true
          }
        },{
          "createIndex": {
            "columns": [
              {
                "column": {
                  "name": "v"
                }
              }]
          ,
            "indexName": "ref_performance_rating_v_idx",
            "tableName": "ref_performance_rating",
            "schemaName" : "public",
            "unique": true
          }
        }]
    }
  },




  {
    "changeSet": {
      "id": "0000000000-1",
      "author": "frankvr",
      "objectQuotingStrategy": "QUOTE_ALL_OBJECTS",
      "changes": [
        {
          "sqlFile": {
            "dbms": "postgresql",
            "encoding": "utf8",
            "path": "public/asset_core_master_data.sql",
            "relativeToChangelogFile": false,
            "endDelimiter": ";"
          }
        },{
          "sqlFile": {
            "dbms": "postgresql",
            "encoding": "utf8",
            "path": "public/kv_types_master_data.sql",
            "relativeToChangelogFile": false,
            "endDelimiter": ";"
          }
        },{
          "sqlFile": {
            "dbms" : "postgresql",
            "encoding" : "utf8",
            "path": "public/units_master_data.sql",
            "relativeToChangelogFile": false,
            "endDelimiter" : ";"
          }
        },{
          "sqlFile": {
            "dbms" : "postgresql",
            "encoding" : "utf8",
            "path": "public/asset_tags_stored_procs.sql",
            "relativeToChangelogFile": false,
            "endDelimiter" : "//"
          }
        },{
          "sqlFile": {
            "dbms" : "postgresql",
            "encoding" : "utf8",
            "path": "public/asset_core_stored_procs.sql",
            "relativeToChangelogFile": false,
            "endDelimiter" : "//"
          }
        },{
          "sqlFile": {
            "comment" : "Diacritics",
            "dbms" : "postgresql",
            "encoding" : "utf8",
            "path": "public/accentless_search.sql",
            "relativeToChangelogFile": false,
            "endDelimiter" : ";"
          }
        },{
          "sqlFile": {
            "comment" : "Check constraints",
            "dbms" : "postgresql",
            "encoding" : "utf8",
            "path": "public/checkconstraints.sql",
            "relativeToChangelogFile": false,
            "endDelimiter" : "//"
          }
        },{
          "sqlFile": {
            "comment" : "Views",
            "dbms" : "postgresql",
            "encoding" : "utf8",
            "path": "public/asset_core_views.sql",
            "relativeToChangelogFile": false,
            "endDelimiter" : ";"
          }
        }
      ]
    }
  },



  {
    "changeSet": {
      "id": "1549b7af-53b7-4f2c-b34d-6e8558410152",
      "author": "frankvr",
      "objectQuotingStrategy": "QUOTE_ALL_OBJECTS",
      "changes": [
        {
          "sqlFile": {
            "comment": "added missed check constraint",
            "dbms": "postgresql",
            "encoding": "utf8",
            "path": "public/checkconstraints2.sql",
            "relativeToChangelogFile": false,
            "endDelimiter": ";"
          }
        }
      ]
    }
  }, {
    "changeSet": {
      "id": "87d80c1e-3e22-4cf5-8fc9-ded367ef6aa2",
      "author": "frankvr",
      "objectQuotingStrategy": "QUOTE_ALL_OBJECTS",
      "changes": [
        {
          "dropColumn":  {
            "columns":  [
                {
                  "column": {
                    "name":  "asset_info"
                  }
                }],
            "schemaName":  "public",
            "tableName":  "ref_performance_rating"
          }
        }, {
          "addColumn":  {
            "columns":  [
              {
                "column": {
                  "name":  "condition_standard",
                  "type" : "text",
                  "constraints" : {
                    "nullable" : false
                  }
                }
              }],
            "schemaName":  "public",
            "tableName":  "ref_performance_rating"
          }
        }
      ]
    }
  }
]}